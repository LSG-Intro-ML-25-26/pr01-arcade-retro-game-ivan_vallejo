on_start_screen = True
on_oak_intro = False
text_sprite: TextSprite = None
text_sprite_oak: TextSprite = None
on_game = False
red: Sprite = None
current_map = ""
player_name = ""
KindNPC = SpriteKind.create()
npc_list: List[NPC] = []
#Comando cambiar color:
#color.set_color(3, color.rgb(131, 213, 98))
#color.set_color(5, color.rgb(246, 238, 197))
#color.set_color(6, color.rgb(189, 255, 139))
#color.set_color(7, color.rgb(57, 148, 49))
#color.set_color(10, color.rgb(57, 90, 16))
#color.set_color(12, color.rgb(123, 123, 131))

#Comando volver color original:
#color.set_color(3, color.rgb(255, 147, 196))
#color.set_color(5, color.rgb(255, 246, 9))
#color.set_color(6, color.rgb(36, 156, 163))
#color.set_color(7, color.rgb(120, 220, 82)
#color.set_color(10, color.rgb(142, 46, 192))
#color.set_color(12, color.rgb(92, 64, 108))

class NPC:
    def __init__(self, name: str, image: Image, x: int, y: int, dialogue: list):
        self.name = name
        self.dialogue = dialogue
        self.sprite = sprites.create(image, KindNPC)
        tiles.place_on_tile(self.sprite, tiles.get_tile_location(x, y))
        self.sprite.set_flag(SpriteFlag.GHOST, False)
    def talk(self):
        for line in self.dialogue:
            game.show_long_text(self.name + ": " + line, DialogLayout.BOTTOM)

    def destroy(self):
        self.sprite.destroy()

def clear_map():
    global npc_list
    for s in sprites.all_of_kind(KindNPC):
        s.destroy()
    npc_list = []

def player_home_npc():
    clear_map()
    mom = NPC("Mamá", assets.image("""mom_front"""), 7, 6, ["Buenos días " + player_name + "!", "Hoy por fin vas a ser un entrenador Pokemon!", "El profesor Oak me ha dicho que vayas a su laboratorio para darte tu primer Pokémon!"])
    npc_list.append(mom)

def pallet_town_npc():
    clear_map()
    flower_girl = NPC("Niña", assets.image("""flower_girl"""), 8, 14, ["Estas flores huelen muy bien y son muy bonitas!"])
    npc_list.append(flower_girl)
    kid0 = NPC("Niño", assets.image("""kid0"""), 6, 19, ["Estamos compitiendo a ver quien hacer rebotar más veces una piedra sobre el agua!"])
    npc_list.append(kid0)
    kid1 = NPC("Niño", assets.image("""kid1"""), 11, 19, ["He llegado a hacer que la piedra rebote 7 veces, voy ganando!!!"])
    npc_list.append(kid1)
    kid2 = NPC("Niño", assets.image("""kid2"""), 2, 10, ["Buenos días " + player_name + "!"])
    npc_list.append(kid2)

def rival_house_npc():
    clear_map()

def start_screen():
    global on_start_screen
    on_start_screen = True
    scene.set_background_image(img("""
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111bd111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbd11111111111111111111111111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111bcccb11111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111ddccbbcb1111111111111111111111111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111dbcbdddccbd11111111111111111111111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111bcbddddbccd11111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111ddd1dd1111111111bcbdddbbcbbd11111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111dd111111111111111111111111ddbbbbd1bcd11111111bcbddbbccbdd11111111111dbbbbbbbd1111111111111111111111111111111111111111111111111
        11111111111111111111111111ddddbbbbbbbbbddd1111111111111dddbbcccccddcccbd11111dccbbcccbbbd1111dbbbbbbbccccccccb111111111ddd1111111111111111111111111111111111111
        11111111111111111111111dddbbcccbbccbbbcccbdd1111111111bbccccbbbccdbcbccbd1111dbcccccbbbbd1111bcbbbbbccccddddcb111111111bbbbdddd11111111111111111111111111111111
        111111111111111111111ddbbccbbbbbdddddbbbccbbd11111111dccbbbddddbcbcbddbccbd1dbbcccccbbccbbd1dccbddddbcccddddcc111111111bccccbbbbddd1111111111111111111111111111
        1111111111111111111ddbccbbbddddddddddddddbbcbd1111111dccdddddddbccbddddbbcbdbccbbdddddbbccbddccddddddbcbddddcc111111111bcbbbbbbcccb1dddd11111111111111111111111
        111111111111111111bbccbbdddddddddddddddddddbcb111111dbccbbdddddbcbdddddddbcccbbdddddddddbbcbbcbddddddbcdddddccd111111ddbcddddddbbccdbcbbbbddd111111111111111111
        11111111111111111dccbdddddddddddddddddddddddccd11111bbbcccdddddbcddddddddbccbddddbbbbddddbccccbdddddddcdddddbcb111111bbbccbddddddbcdbcbccbbbbbd1111111111111111
        11111111111111111dbcbdddddddddddddddddddddddbcbd1111bbbcccdddddbbdddddddbccbddddbcccbddddbccccbdddddddbddddddcb11ddddbbbccbddddddbcccbddddbbcbd1111111111111111
        1111111111111111ddbccbddddddddddddbbbbbbdddddccd1111bbbbbcbddddddddddddbccbddddbcccbddddbccbccdddddddddddddddccddbbbbbbbccbdddddddcccddddddbcb11111111111111111
        111111111111111dbbbbccddddddddddddbcccccbddddccd1dddcbbbbcbdddddddddddbcccbddddcbbbdddbcccbbccdddddddddddddddccbccbbbbbbccbdddddddcccddddddccd11111111111111111
        111111111111111dbbbbbccddddddddddddbcccccbdddccdbbbcccccccbddddddddddbcbccdddddcdddddbcccccbccdddddddddddddddbccbbddddddbbcbddddddbccddddddccd11111111111111111
        1111111111111111dbbbbbcbbcbddddddddddbbccbdddcccbbddddbbcccdddddddddccbbccdddddbddddbccbbbcccbdddddddddddddddccdddbdddddddccddddddbcbdddddbcb111111111111111111
        1111111111111111dbbbbbcccccddddddddddddbcbddbccbdddddddddbcbdddddddbccbbccdddddddddbbbddddbccbbdddddddddddddbcbddbcdddddddbcbddddddcddddddccd111111111111111111
        11111111111111111dbbbbbccccbdddddddddddbbddbccbddbbdddddddccddddddddbbbbccbddddddddddddddddbccbddddddddddddbcbdddccddddbdddcbddddddbdddddbcb1111111111111111111
        111111111111111111dbbbbbbbccddddddddddbbddbccbdddccdddddddbcbdddddddddddbbcbddddddddddddddbbcbddddbdddddbddccddddbccbbbcdddbcddddddddddddccd1111111111111111111
        1111111111111111111dbbbbbbbccddddddddddddbccbddddccbdddbdddbcdddddddddddddccbddddddddddddbcccdddddbcddddcddccdddddcccccbdddccddddddddddddccd1111111111111111111
        1111111111111111111dbbbbbbbccdddddddddddbcccdddddbccccccdddbcdddbbddddddddbccccbddddddbcccccbdddddbcbddbcbdccdddddbbbbdddddcbdddddddddddbcb11111111111111111111
        11111111111111111111ddddbbbbccdddddddddbccccddddddccccbddddbcdddcccbbdddddddbccccccccccccbccbdddddbccddccbdccdddddddddddddbcdddbddddddddccd11111111111111111111
        11111111111111111111111dbbbbccddddddddbccbbcdddddddbbbddddbcbdddcccccbbdddddddbbbccccccbbbccddddddcccbbcccdccbdddddddddddbcbdddbdddddddbcb111111111111111111111
        111111111111111111111111dbbbbcbdddddddbcbbbcddddddddddddddccddddccbbbcccbddddddddbcbbbbbbbccbbbddbcbbcccccdbccddddddddddbcbdddbcdddddddccd111111111111111111111
        1111111111111111111111111bbbbccbdddddddccbbccddddddddddddbccddddccbbbbbbcbbbdddddbcbbbbbbbbcccccbccbbbccccddbccbbdddddbbcbddddbcdddddddccd111111111111111111111
        1111111111111111111111111dbbbbccdddddddccbbbcbddddddddddbcccddddccbbbbbbbbcccbdddbcbbbddbbbbbbbbbbcbbbcbccdddbcccccccccccdddddccddddddbcb1111111111111111111111
        1111111111111111111111111dbbbbccbddddddccbbbccbbddddddbbccccddddccbbbbbbbbbbcccbbbcddd1dbbbbbbbbbbbbbbbbccdddddcccccccbccdddddccddddddbcd1111111111111111111111
        11111111111111111111111111dbbbbccddddddbcbbbbcccbbbbbbcbcbccddbbccddbbbbbbbbbccbcccd111dbbbbbbbbbddbbbbbccbbbbbbccbbbbbccddddbccdddddbcb11111111111111111111111
        111111111111111111111111111dbbbbcbddddddccbbbbbbcccccbbbbbbcccccccd1dddbbbbbbbbbbbcd1111dddddbbbb11dbdbbbcccccccccbbbbbcccbbbcccdddddbcd11111111111111111111111
        111111111111111111111111111dbbbbccddddddbcbbbbbbbbbbbbbbbbbbbbbbbdd111dddbbbbbbbbdbd111111ddddddd111d1bbbbbbbbbbbbbbbbbbbbbbccccdddddccd11111111111111111111111
        1111111111111111111111111111bbbbbcbdddddbcbbbbbbbbbbbbbbbbbbbbbbd1111111dddbbbbbbd11111111111111111111bbbbbbbbbbdddddbbbbbbbbbccddddbcbdddd111d1111111111111111
        1111111111111111111111111111dbbbbccddddbbccdbbbbbbbbbdddbbbbbbbbd1111111111dddbbbd11111111111111111111bbbbbbbbbbd1111bbbbbbbbbccbbddbcdbcbcd1dc1111111111111111
        11111111111111111111111111111bbbbbcbbbbcccbddddbbbddd111bbbbddddd111111111111dddbd11111111111111111111ddddddbbbbd1111bbbbbbbbbccbcbbcb1dcdcbbbc1111111111111111
        11111111111111111111111111111dbbbbccccbbbddd111dddd11111ddddd1111111111111111111dd11111111111111111111111111ddddd1111dddddddbbbbbbbbcd11c1c1bdc1111111111111111
        111111111111111111111111111111dbbbbccbbbd1111111111111111111111111111111111111111111111111111111111111111111111111111111111dbbbbbbbbbd11d1d111d1111111111111111
        111111111111111111111111111111dbbbbbbbbbbd111111111111111111111111111111111111111111111111111111111111111111111111111111111dbbbbbbbb111111111111111111111111111
        1111111111111111111111111111111dbbbbbbbddd1111111111111111111111111111111111111111111111111111111111111111111111111111111111dddbbbbb111111111111111111111111111
        1111111111111111111111111111111dbbbdddd111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddddd111111111111111111111111111
        11111111111111111111111111111111dddd111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111b111111111111111111111111111111111111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111ddd11111d11d1111111d1111b311111111111111dddd1111111111bb11ddd1111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111deebb11ddee1bb11ddd1bb11dbd11ddd111111111eebed11ddd1111bb11bbed111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111d2ebb13eb2e1bb13ebb1bb13ebeddeebd1111111d2ebeb13ebed111ee11bb2e111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111d2ebbdeed2edeedeedddeedeed2ed2ede1111111d2ebebdeed2e11d2e1beb2e111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111d2ebb1beb2ed2e1bebbd2e1bebebd2ede1111111d2ed2e1bebeb1bbeb1bebbeb11111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111133331133331331133313311333113313111111113313311333113331113313311111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dbbbd1111111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bcbbcccbcb11111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dbcbccbdddbbbc1111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cbbbddd111bbbbb111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bbbdd111111bbbbcd11111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcdd11111111dbbbbc11111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111df111111ddddbbbbbf11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bb1dbbbbdddbbbbbfd1111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcdbbbbbccccccbcfc1111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bcbecccfccfccccccfb111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcccfcfcebbfdbbcdbfb111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bbcfbfddddedd1dbdf1111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bfdbdbddddd1cdcb1111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbddbbbdd1dcbd11111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dccbbbedbbcdd111111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111bbb111111111111ceeceebcbbb1111111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111ccebb1111111111beddcffbf1dbbb11111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111dccbddcc111111dccced1dfe3ecdbfbdcd11111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbbbbbf11111dcbddccddccccfcbbbbbc11111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbbcbbc11111bb111dceebcccfbddbcdcb1111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111bebbfccbb111dcb111debbccccfebddc1dc1111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111dfedcefbfcbbbbbeb11bbdbfcccffbbdcd1bb111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111dfeecdcdcccfbd1decdcbbbccccffbbbbc1dc111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111beccbcbcccfdddbcfccbbbbfcfffcbbbfdcb111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111dddcccfcccbbbcccccbbbbffffffbbbfbbc111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111dddcbbdbbddddfbbbbbffffffbbcfddcd11111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111df1dddbffbbffccbfdddc11111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bcccccccbcfcfb1bebcfcd111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bfcccbbbfcbcc11ccccfc111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfbbbbbbcbbbf11dfccccb11111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbbbbcccbbbf11bcccbcc11111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bbbbbbcfbbbbcddfdcbdcb11111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfbbbbcdbcbbbbc1bcfddc111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbbbbf1dfbbbbf11bbbbd111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccbbbcc1dfbbbbf1111dd1111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfbbbbcd1dcbbbbcb111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccbbbbb111bcbbbbf111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfbbb3c1111dfbbbbf111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dccbbbc1111dfcbccc111111111111111111111111111111111111111111111
        1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111bcbbcb1111bccbccd111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbdddc111dcbbddf1111111111111111111111111111111111111111111111
        111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfebbcf1111beebcfb111111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dccfcccf1111dfcccffbd1111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dfbbbbcc1111dcccccbbc1111111111111111111111111111111111111111111
        11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111dcbbbecd11111dcccbbbc1111111111111111111111111111111111111111111
        1111111111111111dbbbd11bb11111111111111bb11111111111111bb111111111111111111111111111111111111111dbbbbd1111111ddbbbbd1111111111111111111111111111111111111111111
        111111111111111debbbed1bc1dbbbddbbbbd11bc1dbbbd1dbbbd11bc1dbbbd1dbbbd111bbbb1dbbbd1b11111b1bbbb11dcccb1bbbbd1bbcbddbbbd1bb1bb111bb11111111111111111111111111111
        11111111111111debdccbe11bdefbfedffbbd111bdefbfedcfbbd111bdefbfedefbfe1dcfbbbdefbfedfcd1dcfdffbb11dffbbdffbfedffbbdefbfedffcfb111bb1cccd1dccb1111111111111111111
        11111111111111dfdebbdf111dcccffdccccc1111dcccffdffccc1111dcccff1bfcfb1dffdccdffcffdffbbcffdffbb11dffbbdffcfedffbbdffcffdffced111ccdffbe1cfbd1dd1111111111111111
        11111111111111debbbbbe111dbbcfc1bbcfe1d11dbbbfcdcfbfe1d111bbbfcdefbfb1dcfbffdffdffdffdbdffdffbb11dffdddffdfcdffbbdffdffdffdcc11dffdffdf1cfbbdcc1111111111111111
        111111111111111bebbbed111dbbbbd1dbbcd1b111bbbbd1dcbcd1b111bbbbd1dcbcd11dcbcb1cb1cb1cb1d1cb1ccbb111cb111cb1cc1ccbb1cc1cc1cc1cc111cc1cc1c1dcbb1cc1111111111111111
        1111111111111111dbbbd111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
        """))
    bottom_text_sprite()
    music.play(music.create_song(assets.song("""
            startscreen
            """)),
        music.PlaybackMode.UNTIL_DONE)

def close_start_screen():
    sprites.destroy(text_sprite)

def close_oak_intro():
    story.clear_all_text()
    sprites.destroy(text_sprite_oak)

def oak_intro():
    global on_start_screen, on_oak_intro, player_name
    on_start_screen = False
    scene.set_background_image(img("""111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111dddddd111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddbdddbbdd1dddddddd1111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddbbbbbdddd1111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddddddbddd11111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111dbbbbddddddddddddddddddbbdd111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111dbdddddddddddddddddddddddbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111dbbddddbbbbbbddddbbbbbbddbbb111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111dbbbbbddddddbbbddddddbbbbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbdddddddddddddddbbbbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbdddddddddddddddbbbbcb111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbbbbdddddddbeebbbbcbd111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbeeecbddddbccccebbecb1111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddbbebbbccddddbccbbbbbecbd111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbcdddddecbdddbeecb111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbbddddddbdddbeeecb111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddddddddddddddbebbcb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111dbbbdddddddddddddddbbecb1111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddbddddbbcccd11111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111dbbddbeeeebbbbbbbd1111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111dbbbddddddbbbcb111111111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111ddbbcbbbbbbeecccdd1111111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111dddbbbbbbccecceeccccbdd11111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbbbbbcbbbbbbbbbccbbbbdd1111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbbbbbbbbbccbbbbbbddbbbbbd11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111ddbbbd1dddbbbcbbbbcccbbbbbbd111dbbbd1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111dbbbbd1ddbbbbccebccbbbbbbbd1111ddbbb1111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbbbd1d1dbccbcccbbbbbbbbbd111d11dbbd111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbbd1ddddbbbbbcbbbbbbbbbbd11dd111dbb111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbdd11d11dbbbbbbbbbbbddddd1ddd111dbb111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd11111dbbbbbbbbbbbd111111dd111dbbd11111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd1111dbbbbbbbbbbbd111d11111111dbccd1111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd1111dbbbbbbbbbbbd111d11111111dddbcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111ddbddddd1111dbbbbbbbbbbbd111111d11111111bcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddddd1111dbbbbbbbbbbbd111111dd111d11dbcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddd111111dbbbbbbbbbbbd11111dbbd11111dbbd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddd11111ddbbbbbbbbbbbd11111ddbbdd11dddbbd11111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111dbbddbd11111dbbbbbbbbbbbd1111111ddbcbdddddbcb11111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111d1111111111dbbbdbbd11111dbbbbbbbbbbb11111111ddbbbdddddbbbd1111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111ddddd1111111ddbddddbd1111ddbbbbbbbbbbb11111111dddbbddddbbbbbd111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111ddbddbdddddddbbbdddbbd1111ddbbbbbbbbbbb1111111ddddbbbbbbdddbbb111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111dbbbdbbbbbbbbddddbbbb11111ddbbbbbbbbbbb1111111ddddbccbbbbbdbcbd11111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111ddbbebbdbbccbdd1111ddbb1111dddbbbbbbbbbbbdd1111ddddbccccbbddbbbcbd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111dddddddddddbbcccd1111ddbbd111dbbbbbbbbbbbbbdd11ddddbbccbd1111dddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111ddbdddbbbbdddbbeccbdddddbbd111dbcbbbbbbbbbbbddddddbccbd11111111ddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111dbebbbbeebbdddddbcbdddddbbdddddbcbbbbbbbbbbbddddddbcccb111111111ddccd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111dbbbbbbbbbbdddbecbdddddbbdddddbcccbbbbbcbbdddddbbddbbcbd111111ddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111dbccccbeecbecccbddddbbbdddddbffccbbccccbddddbbddddddbbd111dddbbbbd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111dbccccfccbbbbbbbbbddddddcfcbdddbcfcbdddddddbddddbbbddbbbbccb111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111dbccccbcccccbbbbdddbcfccbbbccccbdddddbccbdbbbcccbbcbd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111dbbccbd11dbbdbbdddbeeeecccccecbddddbbcbbbbcccccb1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdddbeeeeeeeeeeebddddbbbbbbbbbccbd1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdddbeeeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdddbeeeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdddbebeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdddbebeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbddbbebbeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbdbbdbbebbbbecceeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbbbdbbebbbbeeceeebbdddddbbddddddbbd11111111111111111111111111111111111111111111111111111111
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbdbbebbbbbbecebbbddddddbdddddbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbdddbbebbbbbbeceebbdddddddbbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbdddbbebbbbbbefeebbdddddddddddddbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbddbbebbbbbbefcebbbdddddddddddbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbcbbbbebbbbbeefceeebdddddddbbbccbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbeeeeebbbbbbeecbcebbbbbbbbbbeeccddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbcceeeebbbbbbecbbceebeeeeeeeeeeecddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbcceeeebbbbbeecdbbcebbbbeeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbccbeeebbbbbeecbdbcebbbbeeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbccbeeebbbbbeecbdbbcebbbbeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbcceeebbbbbeecbddbcceeeeeeeeeeeecbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddddbcceeeebbbbeecbddbbceeeeeeeeeeeecbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbdddddbcceeeebbbeebdddddbcceeeeeeeeeeecbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddddddddddddddddbceeeeebbecbddddddbceeeeeeeeeeecbdddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddddddddddddddddddddddddbbeeeeeebbeecdddddddbeeeeeeeeeeecbddddddddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    666666666666666666666666666666666bbbbbbdddddddddddddddddddddddddddddcceeeeeeebbeecddddddbeeeeeeeeeeecddddddddddddddddbbbbb6666666666666666666666666666666666666
    6666666666666666666666666666666bbbbbddddddddddddddddddddddddddddddddbceeeeeeeebeecddddddbeeeeeeeeeeecdddddddddddddddddddbbbbb6666666666666666666666666666666666
    66666666666666666666666666666bbbbdddddddddddddddddddddddddddddddddddbccceeeeeeeeecdddddbceeeeeeeeeeecddddddddddddddddddddddbbbb66666666666666666666666666666666
    6666666666666666666666666666bbbdddddddddddddddddddddddddddddddddddbcccccccfccccccbdddddbceeeeeeeeeeecddddddddddddddddddddddddbbb6666666666666666666666666666666
    666666666666666666666666666bbbdddddddddddddddddddddddddddddddddddbccceeeecccccfcbddddddbcccceeccccccbdddddddddddddddddddddddddbbb666666666666666666666666666666
    66666666666666666666666666bbbddddddddddddddddddddddddddddddddddddbcceeeecccccccbdddddddddccccceeccccbddddddddddddddddddddddddddbbb66666666666666666666666666666
    6666666666666666666666666bbbbdddddddddddddddddddddddddddddddddddddbcccccccccbbbddddddddddbcfceeeeecccdddddddddddddddddddddddddddbb66666666666666666666666666666
    66666666666666666666666666bbbdddddddddddddddddddddddddddddddddddddddbbbbbbbddddddddddddddddbccccccccbdddddddddddddddddddddddddddbb66666666666666666666666666666
    66666666666666666666666666bbbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbb66666666666666666666666666666
    666666666666666666666666666bbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbb666666666666666666666666666666
    6666666666666666666666666666bbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbb6666666666666666666666666666666
    666666666666666666666666666666bbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbb666666666666666666666666666666666
    66666666666666666666666666666666bbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbb66666666666666666666666666666666666
    6666666666666666666666666666666666bbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbb66666666666666666666666666666666666666
    66666666666666666666666666666666666666bbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbbbb66666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666bbbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbbbbb66666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666bbbbbbbbbbbbbbddddddddddddddddddddddddddddddbbbbbbbbbbbbbb6666666666666666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666666666666666666bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb66666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666"""))
    music.play(music.create_song(assets.song("""oakLabTheme""")),
        music.PlaybackMode.LOOPING_IN_BACKGROUND)
    story.print_dialog("Antes de empezar, como te llamas?", 80, 110, 30, 150)
    player_name = game.ask_for_string("Cuál es tu nombre?", 12)
    story.print_dialog("Ah, " + player_name + ", ¡qué nombre tan genial!", 80, 110, 30, 150)
    on_oak_intro = True
    top_text_sprite()
    story.print_dialog("Hola " + player_name + "! Bienvenido al mundo Pokémon.", 80, 110, 30, 150)
    story.print_dialog("Mi nombre es Oak, pero la gente me llama profesor Pokémon.", 80, 110, 50, 150)
    story.print_dialog("Este mundo está habitado por", 80, 110, 30, 150)
    story.print_dialog("unas criaturas llamadas Pokémon,", 80, 110, 30, 150)
    story.print_dialog("algunos los usan de mascota,", 80, 110, 30, 150)
    story.print_dialog("otros los usan para luchar,", 80, 110, 30, 150)
    story.print_dialog("mientras que yo los estudio como profesión.", 80, 110, 50, 150)
    story.print_dialog("Por si todavía no lo sabes,", 80, 110, 30, 150)
    story.print_dialog("un Pokémon es esto de aquí, se llama nidoran.", 80, 110, 50, 150)
    scene.set_background_image(img("""111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111dddddd111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddbdddbbdd1dddddddd1111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dddddddddddddbbbbbdddd1111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddddddddddddddddddddbddd11111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111dbbbbddddddddddddddddddbbdd111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111dbdddddddddddddddddddddddbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111dbbddddbbbbbbddddbbbbbbddbbb111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111dbbbbbddddddbbbddddddbbbbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbdddddddddddddddbbbbbb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbdddddddddddddddbbbbcb111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbbbbdddddddbeebbbbcbd111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbeeecbddddbccccebbecb1111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111ddbbebbbccddddbccbbbbbecbd111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbcdddddecbdddbeecb111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbbddddddbdddbeeecb111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddddddddddddddbebbcb111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111dbbbdddddddddddddddbbecb1111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111dddddddddbddddbbcccd11111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111dbbddbeeeebbbbbbbd1111111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111111111dbbbddddddbbbcb111111111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111111ddbbcbbbbbbeecccdd1111111111111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111111111dddbbbbbbccecceeccccbdd11111111111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111111111ddbbbbbbbbbcbbbbbbbbbccbbbbdd1111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111dbbbbdddbbbbbbbbbccbbbbbbddbbbbbd11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111ddbbbd1dddbbbcbbbbcccbbbbbbd111dbbbd1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111111dbbbbd1ddbbbbccebccbbbbbbbd1111ddbbb1111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbbbd1d1dbccbcccbbbbbbbbbd111d11dbbd111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbbd1ddddbbbbbcbbbbbbbbbbd11dd111dbb111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111dbbbdd11d11dbbbbbbbbbbbddddd1ddd111dbb111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd11111dbbbbbbbbbbbd111111dd111dbbd11111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd1111dbbbbbbbbbbbd111d11111111dbccd1111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111111111111111111dbbdddd1111dbbbbbbbbbbbd111d11111111dddbcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111ddbddddd1111dbbbbbbbbbbbd111111d11111111bcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddddd1111dbbbbbbbbbbbd111111dd111d11dbcd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddd111111dbbbbbbbbbbbd11111dbbd11111dbbd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddd11111ddbbbbbbbbbbbd11111ddbbdd11dddbbd11111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111dbbddbd11111dbbbbbbbbbbbd1111111ddbcbdddddbcb11111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111d1111111111dbbbdbbd11111dbbbbbbbbbbb11111111ddbbbdddddbbbd1111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111ddddd1111111ddbddddbd1111ddbbbbbbbbbbb11111111dddbbddddbbbbbd111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111ddbddbdddddddbbbdddbbd1111ddbbbbbbbbbbb1111111ddddbbbbbbdddbbb111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111dbbbdbbbbbbbbddddbbbb11111ddbbbbbbbbbbb1111111ddddbccbbbbbdbcbd11111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111ddbbebbdbbccbdd1111ddbb1111dddbbbbbbbbbbbdd1111ddddbccccbbddbbbcbd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111dddddddddddbbcccd1111ddbbd111dbbbbbbbbbbbbbdd11ddddbbccbd1111dddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111ddbdddbbbbdddbbeccbdddddbbd111dbcbbbbbbbbbbbddddddbccbd11111111ddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111dbebbbbeebbdddddbcbdddddbbdddddbcbbbbbbbbbbbddddddbcccb111111111ddccd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111dbbbbbbbbbbdddbecbdddddbbdddddbcccbbbbbcbbdddddbbddbbcbd111111ddbccd1111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111dbccccbeecbecccbddddbbbdddddbffccbbccccbddddbbddddddbbd111dddbbbbd1111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111111111111dbccccfccbbbbbbbbbddddddcfcbdddbcfcbdddddddbddddbbbddbbbbccb111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111dbccccbcccccbbbbdddbcfccbbbccccbdddddbccbdbbbcccbbcbd111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111dbbccbd11dbbdbbdddbeeeecccccecbddddbbcbbbbcccccb1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddbdddbeeeeeeeeeeebddddbbbbbbbbbccbd1111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddbdddbeeeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddbdddbeeeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111111111111111111111111111dbbddbdddbebeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111111ddbd1111111111111111111dbbddbdddbebeeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    11111111111111111111111111111111111111111dbbddbd11111111111111111dbbddbddbbebbeeeeeeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111dbdddbbd1111db666cbdddd11dbbddbdbbebbbbecceeeebdddddbbddddddbcb11111111111111111111111111111111111111111111111111111111
    111111111111111111111111111111111111111ddbbdbbbd1dd6b1111ddbcccb11dbbdbdbbebbbbeeceeebbdddddbbddddddbbd11111111111111111111111111111111111111111111111111111111
    ddddddddddddddddddddddddddddddddddddb66ccccccbbbbbb11111999ddbbbdddbbdbdbbebbbbbbecebbbddddddbdddddbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    ddddddddddddddddddddddddddddddddddbb911111dddbccbd9dddbcbddbcbdddddbcbddbbebbbbbbeceebbdddddddbbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddddd91111119bccb1119db66666bdddbbddddbbdddbbebbbbbbefeebbdddddddddddddbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddbbdd9d9119dbbbd111db6666666cbdddbbbbbbbddbbebbbbbbefcebbbdddddddddddbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddddbb9dbbbd9999dddddd9966666666cbddddbbbbcbbbbebbbbbeefceeebdddddddbbbccbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    ddddddddddddddddddddddddddddddbccdbbbcbb9999ddbbdddb66666666cbdbbcccceeeeebbbbbbeecbcebbbbbbbbbbeeccddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    ddddddddddddddddddddddddddddddbccdbddbccd9999dbbbbbdb6666666cbbbbbcccceeeebbbbbbecbbceebeeeeeeeeeeecddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddbbbbbbbbccecd999dbbbbbbbbb66c6666bbdddbcfeeeebbbbbeecdbbcebbbbeeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    ddddddddddddddddddddddddddddbbbbccdbceeecbd99dbbcccbbbbdbbcc6bbbbddbcfbeeebbbbbeecbdbcebbbbeeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    ddddddddddddddddddddddddddddbccbbbbbceeeebd9ddbddbbcccd99ddbbbbbbbbbcfeeeebbbbbeecbdbbcebbbbeeeeeeecbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    dddddddddddddddddddddddddddddbbbbbcdbceeecbddbbbdddddddd6bdddbbbbbbbbcceeebbbbbeecbddbcceeeeeeeeeeeecbddddddddddddddddddddddddddddddddddddddddddddddddddddddddd
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcbbbce4ecd9ddbbbbd9999d66bdddbbdbccbbceeeebbbbeecbddbbceeeeeeeeeeeecbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcccbbcfcd999ddccbb999999999ddbcbcbdbbceeeebbbeebdddddbcceeeeeeeeeeecbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbcbd99999999dccb9999999ddddddcbdddbeeeeeebbecbddddddbceeeeeeeeeeecbdddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbdddd9999999999d99999ddddbccbddbeeeeeebbeecdddddddbeeeeeeeeeeecbddddddddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
    6666666666666666666666666666666666bbbbbdd99999999999dbd99ddbbbbbcbbbbfeeeeeeebbeecddddddbeeeeeeeeeeecddddddddddddddddbbbbb6666666666666666666666666666666666666
    66666666666666666666666666666666bbbbbbbd99999999999d6cbdddb6cbbbcccbbeeeeeeeeebeecddddddbeeeeeeeeeeecdddddddddddddddddddbbbbb6666666666666666666666666666666666
    66666666666666666666666666666bbbbddddbbbdd9999999dddcbbddbbccbbcccbddbcceeeeeeeeecdddddbceeeeeeeeeeecddddddddddddddddddddddbbbb66666666666666666666666666666666
    6666666666666666666666666666bbbbddddddbcddddddddddddbddddbcc6bccddbbccccccfccccccbdddddbceeeeeeeeeeecddddddddddddddddddddddddbbb6666666666666666666666666666666
    666666666666666666666666666bbbddddddddbcdddbbddddddddddddbbbbbccbbcfceeeecccccfcbddddddbcccceeccccccbdddddddddddddddddddddddddbbb666666666666666666666666666666
    66666666666666666666666666bbbddddddddddbbbdbbcbbbbdddddbbbbbbbbbcbcceeeecccccccbdddddddddccccceeccccbddddddddddddddddddddddddddbbb66666666666666666666666666666
    66666666666666666666666666bbbddddddddddbcbddbccccbddddbbcccbbbbbcbbcccccccccbbbddddddddddbcfceeeeecccdddddddddddddddddddddddddddbb66666666666666666666666666666
    66666666666666666666666666bbbddddddddddbcbddbbbbbbbddbbbbcbcbdbcbdddbbbbbbbddddddddddddddddbccccccccbdddddddddddddddddddddddddddbb66666666666666666666666666666
    66666666666666666666666666bbbddddddddddbbcbdbcdddbcddbcbdbcfcccdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbb66666666666666666666666666666
    666666666666666666666666666bbbdddddddddbcfcccddddbcbcbcbdddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbb666666666666666666666666666666
    6666666666666666666666666666bbbdddddddddddddddddddbffcbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbb6666666666666666666666666666666
    666666666666666666666666666666bbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbb666666666666666666666666666666666
    66666666666666666666666666666666bbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbb66666666666666666666666666666666666
    6666666666666666666666666666666666bbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbb66666666666666666666666666666666666666
    66666666666666666666666666666666666666bbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbbbb66666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666bbbbbbbbbddddddddddddddddddddddddddddddddddddddddddddddddddbbbbbbbbb66666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666bbbbbbbbbbbbbbddddddddddddddddddddddddddddddbbbbbbbbbbbbbb6666666666666666666666666666666666666666666666666666
    66666666666666666666666666666666666666666666666666666666666bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb66666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666"""))
    story.print_dialog("Este que ves es solo uno de más de 150 existentes.", 80, 110, 50, 150)
    story.print_dialog("Y tu deberás recabar información sobre", 80, 110, 30, 150)
    story.print_dialog("todos y cada uno de ellos.", 80, 110, 30, 150)
    story.print_dialog("Bien, " + player_name + ".", 80, 110, 30, 150)
    story.print_dialog("¡Tu aventura Pokémon está a punto de comenzar!", 80, 110, 50, 150)

    close_oak_intro()
    start_game()

def oak_cutscene():
    story.start_cutscene(oak_intro)

def start_game():
    global on_oak_intro, on_game, red
    if on_game:
        return
    on_oak_intro = False
    on_game = True
    red = sprites.create(assets.image("""red_static"""), SpriteKind.player)
    controller.move_sprite(red)
    scene.camera_follow_sprite(red)
    player_room(6, 7)

def player_room(x, y):
    global red, current_map
    current_map = "player_room"
    tiles.set_current_tilemap(tilemap("""Red_House_F3"""))
    clear_map()
    tiles.place_on_tile(red, tiles.get_tile_location(x, y))

def pallet_town(x,y):
    global red, current_map
    current_map = "pallet_town"
    tiles.set_current_tilemap(tilemap("""Pallet_Town"""))
    pallet_town_npc()
    color.set_color(3, color.rgb(131, 213, 98))
    color.set_color(5, color.rgb(246, 238, 197))
    color.set_color(6, color.rgb(189, 255, 139))
    color.set_color(7, color.rgb(57, 148, 49))
    color.set_color(10, color.rgb(57, 90, 16))
    color.set_color(12, color.rgb(123, 123, 131))
    tiles.place_on_tile(red, tiles.get_tile_location(x, y))

def player_house(x, y):
    global red, current_map
    current_map = "player_house"
    tiles.set_current_tilemap(tilemap("""Red_House_F0"""))
    player_home_npc()
    color.set_color(3, color.rgb(255, 147, 196))
    color.set_color(5, color.rgb(255, 246, 9))
    color.set_color(6, color.rgb(36, 156, 163))
    color.set_color(7, color.rgb(120, 220, 82))
    color.set_color(10, color.rgb(142, 46, 192))
    color.set_color(12, color.rgb(92, 64, 108))
    tiles.place_on_tile(red, tiles.get_tile_location(x, y))

def rival_house(x, y):
    global red, current_map
    current_map = "rival_house"
    tiles.set_current_tilemap(tilemap("""Rival_House"""))
    color.set_color(3, color.rgb(255, 147, 196))
    color.set_color(5, color.rgb(255, 246, 9))
    color.set_color(6, color.rgb(36, 156, 163))
    color.set_color(7, color.rgb(120, 220, 82))
    color.set_color(10, color.rgb(142, 46, 192))
    color.set_color(12, color.rgb(92, 64, 108))
    tiles.place_on_tile(red, tiles.get_tile_location(x, y))

def laboratory(x, y):
    global red, current_map
    current_map = "laboratory"
    tiles.set_current_tilemap(tilemap("""Laboratory"""))
    color.set_color(3, color.rgb(255, 147, 196))
    color.set_color(5, color.rgb(255, 246, 9))
    color.set_color(6, color.rgb(36, 156, 163))
    color.set_color(7, color.rgb(120, 220, 82))
    color.set_color(10, color.rgb(142, 46, 192))
    color.set_color(12, color.rgb(92, 64, 108))
    tiles.place_on_tile(red, tiles.get_tile_location(x, y))

def bottom_text_sprite():
    global text_sprite
    text_sprite = textsprite.create("Pulsa A para jugar")
    text_sprite.set_outline(1, 15)
    text_sprite.set_position(80, 110)

def top_text_sprite():
    global text_sprite_oak
    text_sprite_oak = textsprite.create("Pulsa B para omitir")
    text_sprite_oak.set_outline(1, 15)
    text_sprite_oak.set_position(60, 5)

def on_a_pressed():
    global on_start_screen
    if on_start_screen == True:
        on_start_screen = False
        close_start_screen()
        music.stop_all_sounds()
        oak_cutscene()
    elif on_game: 
        for npc_entity in npc_list:
            diff_x = abs(red.x - npc_entity.sprite.x)
            diff_y = abs(red.y - npc_entity.sprite.y)
            if diff_x < 20 and diff_y < 20:
                npc_entity.talk()
                break

controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def on_b_pressed():
    global on_oak_intro
    if on_oak_intro == True:
        story.cancel_current_cutscene()
        story.clear_all_text()
        close_oak_intro()
        music.stop_all_sounds()
        on_oak_intro = False
        pause(200)
        start_game()
controller.B.on_event(ControllerButtonEvent.PRESSED, on_b_pressed)

def on_left_pressed():
    global on_game
    if on_game == True:
        animation.run_image_animation(red, assets.animation("""red_left"""), 200, True)
controller.left.on_event(ControllerButtonEvent.PRESSED, on_left_pressed)

def on_right_pressed():
    global on_game
    if on_game == True:
        animation.run_image_animation(red, assets.animation("""red_right"""), 200, True)
controller.right.on_event(ControllerButtonEvent.PRESSED, on_right_pressed)

def on_up_pressed():
    global on_game
    if on_game == True:
        animation.run_image_animation(red, assets.animation("""red_up"""), 200, True)
controller.up.on_event(ControllerButtonEvent.PRESSED, on_up_pressed)

def on_down_pressed():
    global on_game
    if on_game == True:
        animation.run_image_animation(red, assets.animation("""red_down"""), 200, True)
controller.down.on_event(ControllerButtonEvent.PRESSED, on_down_pressed)

def on_on_update():
    if on_game:
        if red.vx == 0 and red.vy == 0:
            animation.stop_animation(animation.AnimationTypes.ALL, red)

def on_overlap_upstairs(sprite, location):
    global current_map
    if current_map == "player_house":
        player_room(10, 2)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""stairs_mid_left"""), on_overlap_upstairs)

def on_overlap_downstairs(sprite, location):
    global current_map
    if current_map == "player_room":
        player_house(10, 2)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""downstairs4"""), on_overlap_downstairs)

def enter_player_house(sprite, location):
    global current_map
    if current_map == "pallet_town":
        player_house(4, 7)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""door1"""), enter_player_house)

def enter_rival_house(sprite, location):
    global current_map
    if current_map == "pallet_town":
        rival_house(4, 7)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""rivaldoor"""), enter_rival_house)

def exit_house(sprite, location):
    global current_map
    if current_map == "player_house":
        pallet_town(6, 8)
    elif current_map == "rival_house":
        pallet_town(15, 8)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""entry_bottom_centre"""), exit_house)

def enter_lab(sprite, location):
    global current_map
    if current_map == "pallet_town":
        laboratory(6, 12)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""lab_entry"""), enter_lab)

def exit_lab(sprite, location):
    global current_map
    if current_map == "laboratory":
        pallet_town(16, 14)

scene.on_overlap_tile(SpriteKind.player, assets.tile("""lab_entry_bottom_center"""), exit_lab)

game.on_update(on_on_update)
start_screen()